{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "GitHub Actions Monitor Configuration",
  "description": "Configuration schema for GitHub Actions Terminal Monitor",
  "type": "object",
  "required": ["github_token"],
  "properties": {
    "github_token": {
      "type": "string",
      "description": "GitHub personal access token",
      "pattern": "^(ghp_|github_pat_)[a-zA-Z0-9_]{36,255}$",
      "minLength": 40,
      "maxLength": 255
    },
    "repositories": {
      "type": "array",
      "description": "List of repositories to monitor",
      "items": {
        "$ref": "#/definitions/RepositoryConfig"
      },
      "minItems": 1,
      "maxItems": 50
    },
    "monitoring": {
      "$ref": "#/definitions/MonitoringConfig"
    },
    "ui": {
      "$ref": "#/definitions/UIConfig"
    },
    "logging": {
      "$ref": "#/definitions/LoggingConfig"
    }
  },
  "additionalProperties": false,
  "definitions": {
    "RepositoryConfig": {
      "type": "object",
      "required": ["owner", "name"],
      "properties": {
        "owner": {
          "type": "string",
          "description": "Repository owner (user or organization)",
          "pattern": "^[a-zA-Z0-9]([a-zA-Z0-9-]{0,38}[a-zA-Z0-9])?$",
          "minLength": 1,
          "maxLength": 39
        },
        "name": {
          "type": "string",
          "description": "Repository name",
          "pattern": "^[a-zA-Z0-9._-]+$",
          "minLength": 1,
          "maxLength": 100
        },
        "branch": {
          "type": "string",
          "description": "Specific branch to monitor (optional)",
          "pattern": "^[a-zA-Z0-9._/-]+$",
          "minLength": 1,
          "maxLength": 255
        },
        "workflows": {
          "type": "array",
          "description": "Specific workflows to monitor (optional)",
          "items": {
            "type": "string",
            "pattern": "^[a-zA-Z0-9._-]+\\.ya?ml$",
            "minLength": 5,
            "maxLength": 255
          },
          "minItems": 1,
          "maxItems": 10
        },
        "enabled": {
          "type": "boolean",
          "description": "Whether monitoring is enabled for this repository",
          "default": true
        }
      },
      "additionalProperties": false
    },
    "MonitoringConfig": {
      "type": "object",
      "properties": {
        "refresh_interval_seconds": {
          "type": "integer",
          "description": "How often to refresh data in seconds",
          "minimum": 10,
          "maximum": 3600,
          "default": 60
        },
        "max_concurrent_requests": {
          "type": "integer",
          "description": "Maximum number of concurrent API requests",
          "minimum": 1,
          "maximum": 10,
          "default": 5
        },
        "max_retries": {
          "type": "integer",
          "description": "Maximum number of retry attempts for failed requests",
          "minimum": 0,
          "maximum": 10,
          "default": 3
        },
        "retry_delay_seconds": {
          "type": "integer",
          "description": "Delay between retry attempts in seconds",
          "minimum": 1,
          "maximum": 60,
          "default": 5
        },
        "workflow_runs_per_repo": {
          "type": "integer",
          "description": "Number of recent workflow runs to display per repository",
          "minimum": 1,
          "maximum": 10,
          "default": 4
        }
      },
      "additionalProperties": false
    },
    "UIConfig": {
      "type": "object",
      "properties": {
        "theme": {
          "$ref": "#/definitions/ThemeConfig"
        },
        "layout": {
          "$ref": "#/definitions/LayoutConfig"
        },
        "icons": {
          "$ref": "#/definitions/IconConfig"
        }
      },
      "additionalProperties": false
    },
    "ThemeConfig": {
      "type": "object",
      "properties": {
        "success_color": {
          "type": "string",
          "description": "Color for success indicators",
          "enum": ["green", "blue", "cyan", "white"],
          "default": "green"
        },
        "error_color": {
          "type": "string",
          "description": "Color for error indicators",
          "enum": ["red", "magenta", "yellow"],
          "default": "red"
        },
        "warning_color": {
          "type": "string",
          "description": "Color for warning indicators",
          "enum": ["yellow", "magenta", "cyan"],
          "default": "yellow"
        },
        "info_color": {
          "type": "string",
          "description": "Color for informational text",
          "enum": ["blue", "cyan", "white"],
          "default": "blue"
        }
      },
      "additionalProperties": false
    },
    "LayoutConfig": {
      "type": "object",
      "properties": {
        "min_terminal_width": {
          "type": "integer",
          "description": "Minimum terminal width in characters",
          "minimum": 80,
          "maximum": 200,
          "default": 80
        },
        "min_terminal_height": {
          "type": "integer",
          "description": "Minimum terminal height in characters",
          "minimum": 24,
          "maximum": 100,
          "default": 24
        },
        "compact_mode": {
          "type": "boolean",
          "description": "Use compact layout for small terminals",
          "default": true
        },
        "show_header": {
          "type": "boolean",
          "description": "Show application header",
          "default": true
        },
        "show_footer": {
          "type": "boolean",
          "description": "Show status footer",
          "default": true
        }
      },
      "additionalProperties": false
    },
    "IconConfig": {
      "type": "object",
      "properties": {
        "success_icon": {
          "type": "string",
          "description": "Icon for successful runs",
          "enum": ["✓", "✔", "●", "○"],
          "default": "✓"
        },
        "error_icon": {
          "type": "string",
          "description": "Icon for failed runs",
          "enum": ["✗", "✕", "●", "○"],
          "default": "✗"
        },
        "running_icon": {
          "type": "string",
          "description": "Icon for running runs",
          "enum": ["⟳", "⏳", "●", "○"],
          "default": "⟳"
        },
        "queued_icon": {
          "type": "string",
          "description": "Icon for queued runs",
          "enum": ["⏸", "⏹", "●", "○"],
          "default": "⏸"
        }
      },
      "additionalProperties": false
    },
    "LoggingConfig": {
      "type": "object",
      "properties": {
        "level": {
          "type": "string",
          "description": "Logging level",
          "enum": ["error", "warn", "info", "debug", "trace"],
          "default": "info"
        },
        "file": {
          "type": "string",
          "description": "Log file path (optional, logs to stderr if not specified)",
          "pattern": "^[a-zA-Z0-9._/-]+\\.log$"
        },
        "max_file_size_mb": {
          "type": "integer",
          "description": "Maximum log file size in MB",
          "minimum": 1,
          "maximum": 100,
          "default": 10
        },
        "max_files": {
          "type": "integer",
          "description": "Maximum number of log files to keep",
          "minimum": 1,
          "maximum": 10,
          "default": 3
        }
      },
      "additionalProperties": false
    }
  }
}